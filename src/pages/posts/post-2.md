---
layout: ../../layouts/MarkdownPostLayout.astro
title: Blogに細かな変更を加えた話
pubDate: 2025, Apr 03
---

皆さん、こんにちは。以前の記事[^1]で述べたように、本ブログはひとまずデプロイすることを目標に作成したため、CSSを含め細々とした問題がありました。先日これらの改善を行いましたので、せっかくですから記事にまとめたいと思います。

まず、作業内容としては以下の通りです。

- CSSの修正
- Prettierによるformatの導入
- Snippetsの追加
- Sitemapの追加

以下で、それぞれについて少しずつ記述したいと思います。

## CSSの修正

まず、indexページとpostのページでレイアウトが横にずれている、という問題がありましたので、これを修正しました。サイトの長さに依存して、スクロールバーが表示される場合とされない場合があるのが原因だったようです。そのため、スクロールバーを強制的に表示させるようにし、解決しました。

次に、モバイル端末で確認したときに、gなどの下に飛び出る文字の下線が途切れてしまっている、という問題に対処しました。こちらはmerginを大きく取ることで解決し、ついでに線を少し細くしてみました。余談ですが、gやyなどの下に出る部分のことをdecenderと呼ぶよう[^2]です。また一つ勉強になりました。

最後にFootnotesの表示周りを修正しました。Astroの組み込み機能でFootnotesを生成した場合、h2タグで囲まれたFootnotesの文字列が顕現してしまい、デザイン的に微妙なんですよね。Astroの設定を編集することでこれを回避する方法も紹介されていたのですが[^3]、今回はサクッとCSSで解決してしまうことにしました。HTMLを見ると多少不格好ですが、webサイトの見た目としてはこれで十分なので、妥協することとしました。

## Prettierによるformatの導入

本ブログは楽できるところはとことん楽をする、というコンセプトのもと開発されていますが、最低限formatterくらいは導入しておいてもバチは当たらんだろう、ということで、Prettierによる astro、css、jsonファイルに対するformatを導入しました。（そういえばこのときのCommit messageにLint all the codesのようなことを書いた気がしますが、全くLintではないですね）
公式サイト[^4]によるとAstroのVSCode拡張機能にformat機能も統合されているようだったので、これを利用しました。Prettier Plugin for AstroのREADME.md[^5]には、Prettier extensionを利用してastroファイルのformatを行うための設定も書いてあったのですが、そちらを記述するとastroファイルのためのパーサをうまく見つけてくれなかったため、利用しないこととしました。これらの設定に関してはヨシ！という感じが少なからずあるのですが、動いているので良しとします[^6]。

## Snippetsの追加

繰り返しになりますが、本ブログは楽できることはとことん楽をする、というコンセプトを持っています。そこで、ブログの投稿の度にコードフェンス内の記述を行うのもめんどくさかったので、VScode内にsnippetsを追加することとしました。これにより、ブログを書こうと思った時に記載すべき事項が大幅に減り、便利になりました。また、脚注の[^n]:をいちいち記載するのも結構めんどくさかったのですが、使用していない脚注についてはAstro側でビルド時によしなにやっておいてくれることが分かったので、こちらもsnippets内に事前に用意しておくこととしました。どうせ私の文体では、脚注は多くなると相場は決まっているのです。

## Sitemapの追加

せっかくなのでクローラー君にブログを巡回してもらおうと思い調べていたところ、どうやらサイトマップを作ったほうが良いことがわかりました。さて、サイトマップとは何なのでしょう？Google検索セントラル[^7]によると、

> サイトマップとは、サイト上のページや動画などのファイルについての情報や、各ファイルの関係を伝えるファイルです。

ということです。Astroにintegrationされている機能[^8]でこれまたサクッと作成できたので確認してみると、実体[^9] [^10]はXMLファイルで、クローラー君にページ内のリンク構造を伝えるようなものでした。ついでにGoogle Search Consoleに登録もしてみましたが、データの処理に1日かかるとのことで、明日以降きちんと認識されているか確かめるのが楽しみです。

## 結びに

以上が、今回行ったこととなります。作業自体は大したことがなかったのですが、こうして文字に起こしてみると思いのほか長文になり、何か大きなことを成したような気がしてきますね。本稿を書いている中で、引用ブロックやコードブロックのCSSにも修正が必要なことに気が付いたので、気が向いたら取り組もうと思います。ここまでシンプルなページのデザイン1つとっても決めるべきことは多いものですね。世の中のデザインやフロントエンドに向き合っている人々には、ただただ頭が下がるばかりです。あと、途中で見出し表記を使ったせいで最後まで見出しを作成する義務を負ってしまったので、なんだかなあという気持ちになりました。

[^1]: https://braversh.github.io/posts/post-1

[^2]: https://en.wikipedia.org/wiki/Descender

[^3]: https://xenexe.info/c07847cd-d1a2-4020-a9c1-7ed5790f1dec/

[^4]: https://docs.astro.build/en/editor-setup/

[^5]: https://github.com/withastro/prettier-plugin-astro/blob/main/README.md

[^6]: ヨシ！

[^7]: https://developers.google.com/search/docs/crawling-indexing/sitemaps/overview?hl=ja

[^8]: https://docs.astro.build/ja/guides/integrations-guide/sitemap/

[^9]: https://braversh.github.io/sitemap-index.xml

[^10]: https://braversh.github.io/sitemap-0.xml
